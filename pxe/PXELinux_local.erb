<%#
kind: PXELinux
name: PXELinux default local boot
%>

<%# This template has special name (do not change it) and it is used for booting already provisioned hosts. %>
<%
  NFSROOT_RO_HOSTGROUPS = [
    
  ]
  NFSROOT_RW_HOSTGROUPS = [
    'base/rw/owens'
  ]
  NFSROOT_RO_HOSTS = [
    'o0213.ten.osc.edu',
  ]
-%>
DEFAULT menu
PROMPT 0
MENU TITLE PXE Menu
TIMEOUT 200
TOTALTIMEOUT 6000
<% if @host.hostgroup.present? &&
      ((NFSROOT_RO_HOSTGROUPS.include?(@host.hostgroup.to_s) || NFSROOT_RO_HOSTS.include?(@host.name)) ||
         (NFSROOT_RW_HOSTGROUPS.include?(@host.hostgroup.to_s) && ! @host.build?)) -%>
ONTIMEOUT nfsroot
<% else -%>
ONTIMEOUT local
<% end -%>

<%= snippet "OSC - PXELinux NFS root" %>

LABEL local
     MENU LABEL (local)
     MENU DEFAULT
     LOCALBOOT 0
<%= snippet "OSC - PXELinux shared" %>
