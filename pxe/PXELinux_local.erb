<%#
kind: PXELinux
name: PXELinux default local boot
%>

<%# This template has special name (do not change it) and it is used for booting already provisioned hosts. %>
<%
  @nfsroot_ro_hostgroups = [
    
  ]
  @nfsroot_rw_hostgroups = [
    'base/rw/owens'
  ]
  @nfsroot_ro_hosts = [
    'o0213.ten.osc.edu',
    'o0214.ten.osc.edu',
  ]
-%>
DEFAULT menu
PROMPT 0
MENU TITLE PXE Menu
TIMEOUT 200
TOTALTIMEOUT 6000
<% if @host.hostgroup.present? &&
      ((@nfsroot_ro_hostgroups.include?(@host.hostgroup.to_s) || @nfsroot_ro_hosts.include?(@host.name)) ||
         (@nfsroot_rw_hostgroups.include?(@host.hostgroup.to_s) && ! @host.build?)) -%>
ONTIMEOUT nfsroot
<% else -%>
ONTIMEOUT local
<% end -%>

<%= snippet "OSC - PXELinux NFS root" %>

LABEL local
     MENU LABEL (local)
     MENU DEFAULT
     LOCALBOOT 0
<%= snippet "OSC - PXELinux shared" %>
